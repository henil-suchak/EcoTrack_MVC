@using EcoTrack.WebMvc.ViewModels
@model LeaderboardPageViewModel

@{
    ViewData["Title"] = $"{Model.ActivePeriod} Leaderboard";
    var currentUserIdString = ViewBag.CurrentUserId as string;
}

<div class="leaderboard-card">
    <div class="leaderboard-header">
        <h2>üèÜ Leaderboard</h2>
        <p>See who's making the biggest impact!</p>
    </div>

    <div class="leaderboard-toggle">
        <a asp-action="Index" asp-route-period="Weekly" class="btn @(Model.ActivePeriod == "Weekly" ? "btn-primary" : "btn-outline-secondary")">Weekly</a>
        <a asp-action="Index" asp-route-period="Monthly" class="btn @(Model.ActivePeriod == "Monthly" ? "btn-primary" : "btn-outline-secondary")">Monthly</a>
    </div>

    @if (Model.Entries.Any())
    {
        <div class="leaderboard-list">
            @foreach (var entry in Model.Entries)
            {
                var rowClass = entry.UserId.ToString() == currentUserIdString ? "current-user" : "";
                <div class="leaderboard-list-item @rowClass">
                    <div class="rank">#@entry.Rank</div>
                    <div class="user-name">@entry.UserName</div>
                    <div class="score">@entry.CarbonEmission.ToString("F2") kg CO‚ÇÇ</div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="card-body text-center p-5">
            <p class="lead text-muted">The leaderboard is currently empty. Check back soon!</p>
        </div>
    }
</div>